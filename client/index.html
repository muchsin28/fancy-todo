<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
    textarea{
      padding: 10px;
      box-sizing: border-box;
      width: 100%;
    }
    label{
      text-align: left;
      display: inline-block;
    }
  </style>
  <!-- Custom styles for this template -->
  <link href="signin.css" rel="stylesheet">
  <title>Fancy Todo</title>

</head>
<body class="text-center">
  <div id='login-page' class="container-fluid">
    <form class="form-signin" action="/login" method="POST" id="login-form">
      <img class="rounded-circle" src="https://st2.depositphotos.com/1006318/5909/v/600/depositphotos_59095205-stock-illustration-businessman-profile-icon.jpg" alt="" width="100" height="100"><br>
      <h1 class="h3 mb-3 font-weight-normal">Login</h1>
      <label for="email" class="sr-only">Email address</label>
      <input type="email" id="email" class="form-control" placeholder="Email address" required autofocus>
      <label for="password" class="sr-only">Password</label>
      <input type="password" id="password" class="form-control" placeholder="Password" required>
      <button class="btn btn-lg btn-success btn-inline" style="width:49%" type="submit">Login</button>
      <button class="btn btn-lg btn-secondary btn-inline" style="width:49%"type="button" id='register-redirect'>Register</button>
      <p class="mt-3 mb-3 text-muted ">&mdash; Or Login with &mdash; </p>
      <button class="btn btn-lg btn-secondary btn-inline" type="button">Google.</button>
    </form>
    <p class="mt-5 mb-3 text-muted">muchsin28 &copy; 2020</p>
  </div>
  <div id='register-page' class="container-fluid">
    <form class="form-signin" action="/register" method="POST" id="register-form">
      <img class="rounded-circle" src="https://st2.depositphotos.com/1006318/5909/v/600/depositphotos_59095205-stock-illustration-businessman-profile-icon.jpg" alt="" width="100" height="100">
      <h1 class="h3 mb-3 font-weight-normal">Register</h1>
      <label for="name" class="sr-only">Name</label>
      <input type="text" id="name" class="form-control" placeholder="Name" required autofocus>
      <label for="email" class="sr-only">Email address</label>
      <input type="email" id="reg-email" class="form-control" placeholder="Email address" required autofocus>
      <label for="password" class="sr-only">Password</label>
      <input type="password" id="reg-password" class="form-control" placeholder="Password" required>
      <button class="btn btn-lg btn-success btn-inline" style="width:49%" type="submit">Register</button>
      <button class="btn btn-lg btn-secondary btn-inline" style="width:49%"type="button" id="login-redirect">Login</button>
      <p class="mt-3 mb-3 text-muted ">&mdash; Or Login with &mdash; </p>
      <button class="btn btn-lg btn-secondary btn-inline" type="button">Google.</button>
      <p class="mt-5 mb-3 text-muted">muchsin28 &copy; 2020</p>
    </form>
  </div>
  <div id='main-page' class="container-fluid">
    <h1>Fancy Todo</h1>
    <br><br>
    <div class="row">
      <div id='profile-section' class="col-sm-6 col-md-4">
        <h2>Halo, Syihab</h2>
        <p>hab@muchsin.id<p>
        <button class="btn btn-sm btn-danger btn-inline" id="logout-button" type="button">Logout</button>
        <hr>
        <p><strong>Add todo:</strong></p>
        <form class="" action="/todos" method="POST" id="add-todo-form">
          <label for="todoName" class="sr-only">Name</label>
          <input type="text" id="todo-name" class="form-control" placeholder="Name" required autofocus>
          <textarea rows="4" cols="40" name="comment" form="add-todo-form" placeholder="Description"></textarea>
          <label for="status" class="sr-only">Status:</label>
          <select class="form-control" id="sel1">
            <option selected disabled>&mdash; Select Status &mdash;</option>
            <option>Listed</option>
            <option>Doing</option>
            <option>Done</option>
            <option>Rescheduled</option>
            <option>Expired</option>
          </select><br>
          <div style="text-align: left; font-weight: bolder">
            <label for="category">Category:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <label class="radio-inline"><input type="radio" name="category">  Personal&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <label class="radio-inline"><input type="radio" name="category">  Work</label>
          </div>
          <br>
          <div style="text-align: left; font-weight: bolder">
            <label for="due" >Due:</label>
            <input type="date" id="due" class="form-control" name="due" placeholder="Due" required autofocus><br>
          </div>
          <button class="btn btn-lg btn-success btn-block" type="submit">Add</button>
        </form>
      </div>
      <hr>
      <div id='display-section' class="col-sm-6 col-md-8">
        <h2>Your Todo List</h2>
        <hr>
        <div class="album py-5 bg-light">
          <div class="container">
            <div class="row">
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm ">
                  <img src="https://www.targettraining.eu/wp-content/uploads/2019/02/meetings-practice.jpg" class="card-img-top" alt="...">
                  <div class="card-body text-left">
                    <h5 class="card-title">Name</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">Status:</h6>
                    <p class="card-text">Description</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                      </div>
                      <small class="text-muted">Due Date</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <p class="mt-5 mb-3 text-muted">muchsin28 &copy; 2020</p>
    <br>
  </div>


  
  <!-- ***** SCRIPTS *****-->

  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous">
  </script>
  <script>
    const showLoginPage=()=>{
      $('#register-page, #main-page').hide()
      $('#login-page').show()
    }
    const showRegisterPage=()=>{
      $('#register-page').show()
      $('#login-page, #main-page').hide()
    }
    const showMainPage=()=>{
      $('#register-page,#login-page').hide()
      $('#main-page').show()
    }
    const login=()=>{
      let email=$("#email").val()
      let password=$("#password").val()
      $.ajax({
        url: "http://localhost:3000/login",
        method: "POST",
        data:{
          email,
          password
        }
      })
      .done(response =>{
        localStorage.setItem('access_token', response.access_token)
        showMainPage()
      })
      .fail((xhr, textStatus)=>{
        console.log(xhr, textStatus)
      })
      .always(()=>{
        $("#email").val("")
        $("#password").val("")
      })
    }
    const register=()=>{
      let name=$("#name").val()
      let email=$("#reg-email").val()
      let password=$("#reg-password").val()
      $.ajax({
        url: "http://localhost:3000/register",
        method: "POST",
        data:{
          name,
          email,
          password
        }
      })
      .done(response =>{
        showLoginPage()
      })
      .fail((xhr, textStatus)=>{
        console.log(xhr, textStatus)
      })
      .always(()=>{
        $("name").val("")
        $("#reg-email").val("")
        $("#reg-password").val("")
      })
    }
    const logout=()=>{
      localStorage.clear()
      showLoginPage()
    }
    
    $(document).ready(function(){
      if(localStorage.getItem('access_token')){
        showMainPage()
      }else{
        showLoginPage()
      }

      $('#login-form').on('submit', (event)=>{
        event.preventDefault()
        login()
      });

      $('#register-redirect').on('click',()=>{
        showRegisterPage()
      })

      $('#register-form').on('submit', (event)=>{
        event.preventDefault()
        register()
      })

      $('#login-redirect').on('click',()=>{
        showLoginPage()
      })

      $('#logout-button').on('click',()=>{
        logout()
      })

    });

  </script>

</body>
</html>